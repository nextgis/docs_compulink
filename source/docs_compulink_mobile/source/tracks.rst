.. sectionauthor:: Дмитрий Барышников <dmitry.baryshnikov@nextgis.ru>

.. tracks:

Треки
=====

Программа позволяет записывать и отображать треки. В процессе записи сохраняются точки трека во внутреннюю базу данных. При отображении точки трека в рамках сессии объединяются и отображаются в виде линий на карте. 


Запись
------

Для начала записи трека необходимо выбрать команду на панели инструментов или в меню (см. :numref:`ngmobile_track_menu_pic` п. 1 и 2 соответственно). 

.. figure:: _static/ngmobile_track_menu.png
   :name: ngmobile_track_menu_pic
   :align: center
   :width: 7cm
   
   Команда записи трека.
   
   Цифрами обозначено: 1 - кнопка на панели инструментов для записи стрека; 2 - пункт меню для записи трека.

.. note::
   Если места на панели инструментов не хватает, то команды переносятся в контекстное меню.
   
После выбора команды запускается запись трека. Запись трека выполняется независимо от приложения в фоновом процессе. Для индикации состояния выводится сообщение в панель статуса операционной системы (см. :numref:`ngmobile_status_track_pic`).

.. figure:: _static/ngmobile_status_track.png
   :name: ngmobile_status_track_pic
   :align: center
   :height: 5cm
 
   Статус записи трека.
   
   Цифрами обозначено: 1 - название сессии записи трека; 2 - кнопка завершения записи трека; 3 - кнопка активации приложения, из которого запущен процесс записи трека.
   
Записываемый трек сразу же рисуется на карте. Точки трека группируются по дням и сессиям внутри одного дня. Если запись трека переходит на другой день, то он будет разбит на две части.

Управление
----------

Треки представлены в дереве слоев (см. :numref:`ngmobile_layer_tree_pic`) в виде группового слоя. Над групповым слоем можно выполнить следующие операции:
    
* включение/выключение видимости группового слоя (треков);
* отображение окна управления треками (см. :numref:`ngmobile_settings_track_pic`).

.. figure:: _static/ngmobile_track_settings.png
   :name: ngmobile_settings_track_pic
   :align: center
   :height: 11cm
 
   Окно управления треками.
   
   Цифрами обозначено: 1 - количество выделенных треков; 2 - кнопка выделения всех треков (снятия выделения); 4 - кнопка открытия контекстного меню; 5 - кнопка включения/выключения отображения трека; 6 - кнопка выделения трека; 7 - пункт меню включения/выключения видимости треков; 8 - пункт меню удаления выделенных треков.
   
В окне управления треками представлен их список. Точки треков сгруппированы по дням и по сессиям внутри дня. При открытии окна управления треками ни один из треков не будет выделен. В таком режиме можно только менять видимость отдельных треков. Для выполнения операций над группами треков их необходимо выделить (см. :numref:`ngmobile_settings_track_pic` п. 6). После выделения хотя бы одного трека, окно примет вид, представленный на :numref:`ngmobile_settings_track_pic`. В этом случае над выделенными треками можно выполнять следующие операции:
    
* включение/выключение видимости;
* удаление.
