.. sectionauthor:: Дмитрий Барышников <dmitry.baryshnikov@nextgis.ru>

.. _ngmobile_share:

Выгрузка данных
===============

GeoJSON
-------

При выборе пункта контекстного меню "Поделиться" откроется стандартное системное 
меню выбора способа передачи экспортированных данных (например, по почте, облачное 
хранилище файлов, карта памяти и т.п.). Окно выбора представлено на :numref:`ngmobile_share_pic`. 

.. figure:: _static/ngmobile_share.png
   :name: ngmobile_share_pic
   :align: center
   :height: 10cm
   
   Окно выбора способа передачи экспортированных данных.

При выборе одного из предложенных вариантов, данные из слоя записываются в формат :term:`GeoJSON` (:term:`система координат` Web Mercator, EPSG:3857) и отправляются используя выбранное приложение. Файлу присваивается такое же название, что и имя слоя.

.. note::
   Во многих версиях Android, для того чтобы появилась возможность сохранения файла на диске необходимо, чтобы в системе
   присутствовал какой-нибудь файловый менеджер, например ES Explorer или аналогичный.

Выгрузка приложений
-------------------

К каждому объекту в NGM можно приложить одну или несколько фотографий. Фотографии хранятся отдельно в виде файлов и при экспорте добавляются в архив слоя, для каждого объекта в архиве создается своя папка с приложениями, название папки равно ID объекта. Информация о присоединенных фотографиях содержится в поле `attaches` атрибутивной таблицы слоя.

Пример записи:

(4:10000002.jpg,10000000.jpg,10000001.jpg,10000003.jpg)

Расшифровка:

К данному объекту присоединены 4 фотографии с соответствующими именами. Эти фотографии лежат в папке, название которой равно ID объекта.

Выгрузка треков в GPX
----------------------

.. versionadded:: 2.3

Процесс экспорта треков начинается с выбора в дереве слоев слой "Мои треки". 
Далее следует вызвать контекстное меню, выбрать пункт "Настройки" :numref:`ngmobile_tree_layers_gpx_pic`. 

.. figure:: _static/tree_layers_gpx.png
   :name: ngmobile_tree_layers_gpx_pic
   :align: center
   :height: 10cm

   Дерево слоев.
 
Откроется окно со списком записанных треков. Если несколько треков записывались 
один день, то треки будут разбиты по сессиям. Если один трек записывался несколько 
дней, то записанный трек будет дробиться на части по дням, в которые происходила 
запись :numref:`ngmobile_tracks_list_gpx_pic`. 

.. figure:: _static/tracks_list_gpx.png
   :name: ngmobile_tracks_list_gpx_pic
   :align: center
   :height: 10cm

   Список с записанными треками.

Из списка записанных треков нужно выбрать необходимый трек или треки путем установки флажка 
напротив имени, в результате чего активируются кнопки на верхней панели инструментов.
Для того, чтобы поделиться треком - выберите кнопку в виде трех точек :numref:`ngmobile_tracks_list_and_menus_pic`. 

.. figure:: _static/tracks_list_and_menus.png
   :name: ngmobile_tracks_list_and_menus_pic
   :align: center
   :height: 10cm   

   Активация меню списка записанных треков.
