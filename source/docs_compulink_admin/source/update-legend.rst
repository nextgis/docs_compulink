.. sectionauthor:: Denis Rykov <denis.rykov@nextgis.com>

.. _update-legend:

Обновление легенды
==================

Основная страница Веб-ГИС содержит легенду, содержащую условные обозначения карты.
Легенда является графическим файлом формата PNG. При необходимости данный файл может быть заменен.



Замена файла легенды
--------------------

Для соблюдения размеров разметки основной страницы графический файл должен иметь размер 243 х 500 px. В противном случае в панели отображения легенды могут появиться полосы прокрутки.
Для замены необходимо подменить файл, расположенный по следующему стандартному пути:


.. code:: bash

   /!install_path!/env/nextgisweb_compulink/nextgisweb_compulink/compulink_site/static/img/legend.png


Пример команды замены файла:

.. code:: bash

   sudo cp /home/yellow/new_legend.png /opt/ngw/env/nextgisweb_compulink/nextgisweb_compulink/compulink_site/static/img/legend.png



Генерация файла легенды
-----------------------

Система предусматривает генерацию файла легенды с использованием текущих стилей условных обозначений для картографических слоев бизнес-объектов (таких как линии ВОЛС, муфты и тд).
Для запуска генерации необходимо выполнить команду:

.. code:: bash

    env/bin/nextgisweb --config config.ini compulink.legend

Важно!
Данная команда перезапишет файл легенды по стандартному пути. Перед выполнением данный команды рекомендуется сделать копию существующего файла.


